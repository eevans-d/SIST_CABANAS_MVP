# ============================================================================
# üè† Sistema MVP de Automatizaci√≥n de Reservas - Environment Variables
# ============================================================================
#
# Este archivo contiene TODAS las variables de entorno necesarias para el
# funcionamiento del sistema. Copia este archivo a .env y ajusta los valores.
#
# ‚ö†Ô∏è  IMPORTANTE: Nunca commits archivos .env con valores reales a git
#
# üìã Variables marcadas con [REQUIRED] son obligatorias para funcionamiento
# üìã Variables marcadas con [OPTIONAL] tienen valores por defecto
# üìã Variables marcadas with [PRODUCTION] son cr√≠ticas para deploy en prod
#

# ============================================================================
# üåç ENVIRONMENT CONFIGURATION
# ============================================================================

# Entorno de ejecuci√≥n [REQUIRED]
# Valores: development, staging, production
# En producci√≥n cambia comportamiento de logs, validaciones, etc.
ENVIRONMENT=development

# ============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================

# URL de conexi√≥n a PostgreSQL [REQUIRED]
# Formato: postgresql+asyncpg://usuario:contrase√±a@host:puerto/nombre_db
# IMPORTANTE: Debe usar PostgreSQL 16+ con extensi√≥n btree_gist para constraints
# Para generar contrase√±a segura: openssl rand -base64 32
DATABASE_URL=postgresql+asyncpg://alojamientos:YOUR_SECURE_DB_PASSWORD_HERE@db:5432/alojamientos_db

# Pool de conexiones [OPTIONAL]
# Tama√±o del pool de conexiones a la DB
DB_POOL_SIZE=20

# Overflow m√°ximo del pool [OPTIONAL]
# Conexiones adicionales cuando pool est√° lleno
DB_MAX_OVERFLOW=0

# Variables de Docker Compose (compatibilidad)
DB_NAME=alojamientos_db
DB_USER=alojamientos
# Contrase√±a DB (match con DATABASE_URL) - Generar con: openssl rand -base64 32
DB_PASSWORD=YOUR_SECURE_DB_PASSWORD_HERE
POSTGRES_PASSWORD=YOUR_SECURE_DB_PASSWORD_HERE

# ============================================================================
# üî¥ REDIS CONFIGURATION
# ============================================================================

# URL de conexi√≥n a Redis [REQUIRED]
# Usado para: locks de doble-booking, cache, rate limiting, jobs background
# Formato: redis://host:puerto/db_number
# Para generar contrase√±a segura: openssl rand -base64 32
REDIS_URL=redis://:YOUR_SECURE_REDIS_PASSWORD_HERE@redis:6379/0

# Contrase√±a de Redis [OPTIONAL]
# Si Redis tiene AUTH habilitado - Generar con: openssl rand -base64 32
REDIS_PASSWORD=YOUR_SECURE_REDIS_PASSWORD_HERE

# ============================================================================
# üí¨ WHATSAPP BUSINESS CLOUD API [PRODUCTION]
# ============================================================================

# Token de acceso a WhatsApp Business [REQUIRED]
# Obtenido desde Meta for Developers > WhatsApp > Getting Started
# Ejemplo: EAABxxxxxxxxxxxxxxxxxxxxxx
WHATSAPP_ACCESS_TOKEN=your_whatsapp_access_token_here

# Token de verificaci√≥n de webhook [OPTIONAL]
# Se genera autom√°ticamente si no se especifica
# Debe coincidir con el configurado en Meta for Developers
# Para generar: python -c "import secrets; print(secrets.token_urlsafe(32))"
WHATSAPP_VERIFY_TOKEN=YOUR_WHATSAPP_VERIFY_TOKEN_HERE

# Secreto de aplicaci√≥n de WhatsApp [REQUIRED]
# Para validar firma de webhooks (seguridad cr√≠tica)
# Obtenido desde Meta for Developers > WhatsApp > App Secret
WHATSAPP_APP_SECRET=your_whatsapp_app_secret_here

# ID del tel√©fono de WhatsApp Business [REQUIRED]
# N√∫mero de tel√©fono desde donde se env√≠an mensajes
# Formato: 15551234567 (sin + ni espacios)
WHATSAPP_PHONE_ID=your_whatsapp_phone_id_here

# ============================================================================
# üí≥ MERCADO PAGO INTEGRATION [PRODUCTION]
# ============================================================================

# Token de acceso de Mercado Pago [REQUIRED]
# Para crear payment links y procesar pagos
# Obtenido desde: Mercado Pago > Developers > Credenciales
MERCADOPAGO_ACCESS_TOKEN=your_mercadopago_access_token_here

# Secreto de webhook de Mercado Pago [PRODUCTION]
# Para validar firmas de webhooks de pagos (seguridad cr√≠tica)
# Configurado en: Mercado Pago > Developers > Webhooks
MERCADOPAGO_WEBHOOK_SECRET=optional_webhook_secret

# ============================================================================
# üîê SECURITY & AUTHENTICATION
# ============================================================================

# Secreto para JWT tokens [OPTIONAL]
# Se genera autom√°ticamente si no se especifica
# Para autenticaci√≥n de dashboard admin
# Para generar: openssl rand -base64 32
JWT_SECRET=YOUR_SECURE_JWT_SECRET_HERE

# Algoritmo JWT [OPTIONAL]
JWT_ALGORITHM=HS256

# Expiraci√≥n de tokens JWT en horas [OPTIONAL]
JWT_EXPIRATION_HOURS=24

# Sal para generaci√≥n de tokens iCal [OPTIONAL]
# Se genera autom√°ticamente si no se especifica
# Para generar: openssl rand -hex 16
ICS_SALT=YOUR_SECURE_ICS_SALT_HERE

# ============================================================================
# üåê APPLICATION URLS
# ============================================================================

# URL base de la aplicaci√≥n [REQUIRED]
# Usado para: links en emails, webhooks callbacks, iCal URLs
# Ejemplos: https://your-domain.com, http://localhost:8000
BASE_URL=https://your-domain.com

# Dominio principal [OPTIONAL]
# Usado para configuraci√≥n de cookies y CORS
DOMAIN=your-domain.com

# Or√≠genes permitidos para CORS [OPTIONAL]
# Lista separada por comas de dominios permitidos para frontend
ALLOWED_ORIGINS=http://localhost:3000,https://your-domain.com

# ============================================================================
# üìß EMAIL CONFIGURATION (SMTP) [OPTIONAL]
# ============================================================================

# Servidor SMTP [OPTIONAL]
# Para env√≠o de confirmaciones por email
SMTP_HOST=smtp.yourprovider.com

# Puerto SMTP [OPTIONAL]
SMTP_PORT=587

# Usuario SMTP [OPTIONAL]
SMTP_USER=your_smtp_user

# Contrase√±a SMTP [OPTIONAL]
# Para Gmail usar App Password, no contrase√±a personal
# Para generar: openssl rand -base64 32
SMTP_PASS=YOUR_SECURE_SMTP_PASS_HERE

# Email de origen [OPTIONAL]
SMTP_FROM=reservas@your-domain.com

# Usar TLS para SMTP [OPTIONAL]
SMTP_USE_TLS=true

# ============================================================================
# üéµ AUDIO & NLU CONFIGURATION
# ============================================================================

# Modelo de Whisper para transcripci√≥n [OPTIONAL]
# Valores: tiny, base, small, medium, large
# base = buen balance calidad/velocidad para MVP
AUDIO_MODEL=base

# Confianza m√≠nima para transcripci√≥n [OPTIONAL]
# 0.0 a 1.0 - transcripciones con menor confianza piden texto manual
AUDIO_MIN_CONFIDENCE=0.6

# ============================================================================
# üö¶ RATE LIMITING
# ============================================================================

# Habilitar rate limiting [OPTIONAL]
RATE_LIMIT_ENABLED=true

# N√∫mero de requests permitidos por ventana [OPTIONAL]
RATE_LIMIT_REQUESTS=60

# Ventana de tiempo en segundos [OPTIONAL]
RATE_LIMIT_WINDOW_SECONDS=60

# ============================================================================
# üìÖ ICAL & BACKGROUND JOBS
# ============================================================================

# Intervalo de limpieza de pre-reservas expiradas (segundos) [OPTIONAL]
JOB_EXPIRATION_INTERVAL_SECONDS=60

# Intervalo de sincronizaci√≥n iCal (segundos) [OPTIONAL]
JOB_ICAL_INTERVAL_SECONDS=300

# Edad m√°xima de sync iCal antes de alertar (minutos) [OPTIONAL]
ICAL_SYNC_MAX_AGE_MINUTES=20

# ============================================================================
# üë®‚Äçüíº ADMIN PANEL
# ============================================================================

# Emails permitidos para acceso admin [OPTIONAL]
# Lista separada por comas
ADMIN_ALLOWED_EMAILS=admin@example.com

# Secreto CSRF para admin panel [OPTIONAL]
# Se genera autom√°ticamente si no se especifica
# Valor generado autom√°ticamente:
ADMIN_CSRF_SECRET=WIWaM_CbERF1PW3zMYRrvsbL7IirUnOK

# ============================================================================
# üîß BACKUP & MONITORING (OPCIONAL para MVP)
# ============================================================================

# Directorio de backups [OPTIONAL]
BACKUP_DIR=./backups

# D√≠as de retenci√≥n de backups [OPTIONAL]
BACKUP_KEEP=7

# Webhook de Slack para alertas [OPTIONAL]
SLACK_WEBHOOK_URL=

# Grafana admin [OPTIONAL]
GRAFANA_ADMIN_USER=admin
# Contrase√±a Grafana (valor generado autom√°ticamente):
GRAFANA_ADMIN_PASSWORD=DkKoJoAuFKmjvRyMcnkvXFZGzF4LqhrcXJe800oO/5g=

# ============================================================================
# üöÄ PRODUCTION CHECKLIST
# ============================================================================
#
# Antes de deploy en producci√≥n, aseg√∫rate de:
#
# ‚úÖ ENVIRONMENT=production
# ‚úÖ DATABASE_URL apunta a PostgreSQL real con btree_gist
# ‚úÖ REDIS_URL apunta a Redis real (no localhost)
# ‚úÖ BASE_URL usa HTTPS (https://your-domain.com)
# ‚úÖ WHATSAPP_* configurado con credenciales reales de Meta
# ‚úÖ MERCADOPAGO_* configurado con credenciales de producci√≥n
# ‚úÖ SMTP_* configurado para env√≠o real de emails
# ‚úÖ Todos los *_SECRET tienen valores √∫nicos y seguros
# ‚úÖ ALLOWED_ORIGINS incluye solo dominios de confianza
#
# üîê SECURITY NOTES:
# - Nunca usar valores "dummy" en producci√≥n
# - Rotar secrets regularmente
# - Usar HTTPS en producci√≥n (obligatorio)
# - Configurar firewall para DB y Redis
# - Monitorear logs para intentos de acceso no autorizado
#
